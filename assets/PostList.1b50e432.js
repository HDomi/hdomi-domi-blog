import{F as w,a as y}from"./FadeLoader.d24ffb40.js";import{_ as A,c as i,a as t,d as L,e as C,b,n as S,w as k,v,F as m,r as _,t as d,o as n,p as x,f as B,g as P}from"./index.fa8c8195.js";const N={components:{FadeLoader:w},mixins:[],props:{},data(){return{mdText:"",categories:new Array,categoryNames:new Array,checkedCategory:new Array,postingLength:0,isLoading:!1,categoryState:!1,pageState:!1,allChecked:!0}},computed:{},presets:{},watch:{checkedCategory(){this.isLoading=!0,this.categories=[],this.postingLength=0,this.checkedCategory.forEach(async o=>{let e=await this.getPosts(o);this.categories.push({name:o,posts:e})}),this.checkedCategory.length!==0?this.pageState=!0:this.pageState=!1,this.categoryNames.length==this.checkedCategory.length?this.allChecked=!0:this.allChecked=!1,this.isLoading=!1}},created(){},async mounted(){this.fetchPosts()},methods:{async fetchPosts(){this.isLoading=!0;let o=new Array;await y.get("https://api.github.com/repos/hdomi/posts/contents").then(e=>o=e.data).catch(e=>console.log(`Category ERROR\u{1F644} ${e.response.status} : ${e.request.responseURL}`)),o.forEach(async e=>{e.name!=="img"&&this.categoryNames.push(e.name)}),this.checkedCategory=this.categoryNames,this.isLoading=!1},getPosts(o){return new Promise(e=>{let g=new Array,h=new Array,a=new Array;y.get(`https://api.github.com/repos/hdomi/posts/contents/${o}`).then(l=>{g=l.data,g.forEach(s=>{if(s.name!=="img"){const r=s.name.split("-"),c=r[2].replace(".md","");h.push({name:s.name,title:r[0],date:r[1],description:c})}}),this.postingLength=this.postingLength+h.length,a=h.sort(p);function p(s,r){var c=new Date(s.date).getTime(),u=new Date(r.date).getTime();return c>u?-1:1}sessionStorage.setItem("PostList",JSON.stringify(a)),e(a)})})},openCategory(){this.categoryState=!this.categoryState},checkAll(){this.allChecked&&(this.checkedCategory=this.categoryNames),this.allChecked||(this.checkedCategory=[])},goPost(o,e){this.$router.push({path:"/posting",query:{mdPath:`${o}`,mdId:`${e}`}})}}};const f=o=>(x("data-v-e6152f5b"),o=o(),B(),o),D={class:"page-wrap scrollBar"},E={key:0,class:"loading-container"},F={class:"loading"},I={class:"page-wrap-inner"},V={class:"page-tit-wrap"},R={class:"main-check-wrap"},T={key:0,class:"category-list"},U={class:"ckb-label",name:"all"},q=f(()=>t("span",null,"\uBAA8\uB450",-1)),z=f(()=>t("div",{class:"cutBar",style:{"margin-bottom":"10px"}},null,-1)),O={class:"ckb-label"},J=["value"],M={class:"main-title",style:{"font-size":"14px"}},j={key:0,class:"list-wrap"},G={class:"category-title"},H={class:"posting-item-wrap"},K=["onClick"],Q={class:"pt-item-inner"},W={class:"pt-item-title"},X={class:"pt-item-text"},Y={class:"pt-item-date"},Z={class:"pt-item-desc"},$={key:1};function ee(o,e,g,h,a,l){const p=P("FadeLoader");return n(),i("div",D,[a.isLoading?(n(),i("div",E,[t("div",F,[L(p)])])):C("",!0),t("div",I,[t("div",V,[t("div",R,[t("div",{class:"main-title",onClick:e[0]||(e[0]=(...s)=>l.openCategory&&l.openCategory(...s))},[b("\uCE74\uD14C\uACE0\uB9AC"),t("span",{class:S(["tryAngle",{revert:a.categoryState}])},"\u25BC",2)]),a.categoryState?(n(),i("ul",T,[t("label",U,[q,k(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.allChecked=s),role:"switch",type:"checkbox",value:"all",name:"all",onChange:e[2]||(e[2]=(...s)=>l.checkAll&&l.checkAll(...s))},null,544),[[v,a.allChecked]])]),z,(n(!0),i(m,null,_(a.categoryNames,(s,r)=>(n(),i("li",{key:`chk-box${r}`},[t("label",O,[t("span",null,d(s),1),k(t("input",{"onUpdate:modelValue":e[3]||(e[3]=c=>a.checkedCategory=c),role:"switch",type:"checkbox",value:s},null,8,J),[[v,a.checkedCategory]])])]))),128))])):C("",!0)]),t("div",M,"\uCD1D \uD3EC\uC2A4\uD305 \uC218 ("+d(a.postingLength)+"\uAC1C)",1)]),a.pageState?(n(),i("div",j,[(n(!0),i(m,null,_(a.categories,(s,r)=>(n(),i("div",{key:`category${r}`,class:"category-wrap"},[t("div",G,d(s.name),1),t("div",H,[(n(!0),i(m,null,_(s.posts,(c,u)=>(n(),i("div",{key:`post${u}`,onClick:te=>l.goPost(s.name,c.name),class:"posting-item"},[t("div",Q,[t("div",W,d(c.title),1),t("div",X,[t("div",Y,d(c.date),1),t("div",Z,d(c.description),1)])])],8,K))),128))])]))),128))])):(n(),i("div",$,"\uAC8C\uC2DC\uAE00\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."))])])}const oe=A(N,[["render",ee],["__scopeId","data-v-e6152f5b"]]);export{oe as default};
